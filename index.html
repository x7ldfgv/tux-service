<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tux Service - Official Bio</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #5865F2;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.1);
            --gold: #f1c40f;
            --danger: #ff4757;
            --success: #2ecc71;
        }

        #ban-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: #000; color: white; z-index: 999999; 
            display: none; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; font-family: 'Inter', sans-serif;
        }

        body {
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(rgba(0,0,0,0.85), rgba(0,0,0,0.85)), 
                        url('https://images.unsplash.com/photo-1441974231531-c6227db76b6e?q=80&w=2071&auto=format&fit=crop');
            background-size: cover; background-position: center; background-attachment: fixed;
            color: #ffffff; padding: 40px 20px;
            user-select: none;
        }

        .main-wrapper { display: flex; flex-direction: column; align-items: center; gap: 30px; width: 100%; max-width: 800px; }
        .proof-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; width: 100%; }
        .proof-card { background: var(--glass); border: 1px solid var(--border); border-radius: 15px; overflow: hidden; backdrop-filter: blur(10px); transition: 0.3s; cursor: pointer; }
        .proof-card:hover { transform: translateY(-5px); border-color: var(--primary-color); }
        .proof-card img { width: 100%; height: 160px; object-fit: cover; opacity: 0.8; display: block; }
        .proof-title { padding: 10px; font-size: 12px; text-align: center; background: rgba(0,0,0,0.7); font-weight: 600; }
        .container { text-align: center; width: 100%; max-width: 450px; padding: 30px; background: var(--glass); border-radius: 24px; border: 1px solid var(--border); backdrop-filter: blur(20px); box-shadow: 0 25px 50px rgba(0,0,0,0.6); }
        .profile-icon { width: 100px; height: 100px; margin: 0 auto 15px; border-radius: 50%; overflow: hidden; border: 3px solid var(--border); }
        .profile-icon img { width: 100%; height: 100%; object-fit: cover; }
        .rating-summary { background: rgba(241, 196, 15, 0.1); border: 1px solid rgba(241, 196, 15, 0.2); border-radius: 15px; padding: 15px; margin-bottom: 20px; }
        .avg-score { font-size: 28px; font-weight: 800; color: var(--gold); margin: 0; }
        #total-reviews { font-size: 12px; color: #888; margin: 5px 0 0 0; }
        .discord-btn { display: flex; align-items: center; justify-content: center; background: #fff; color: #000; text-decoration: none; padding: 12px; border-radius: 12px; font-weight: 700; transition: 0.3s; margin-bottom: 25px; }
        .discord-btn:hover { background: var(--primary-color); color: #fff; }
        .star-input { color: var(--gold); font-size: 26px; cursor: pointer; margin-bottom: 15px; display: flex; gap: 5px; justify-content: center; }
        .review-form input, .review-form textarea { width: 100%; padding: 12px; margin-bottom: 10px; border-radius: 10px; border: 1px solid var(--border); background: rgba(0,0,0,0.4); color: white; box-sizing: border-box; outline: none; }
        .submit-btn { width: 100%; background: var(--primary-color); color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .submit-btn:disabled { background: #444; opacity: 0.6; cursor: not-allowed; }
        #reviews-list { margin-top: 20px; max-height: 400px; overflow-y: auto; text-align: left; }
        .review-item { background: rgba(255,255,255,0.03); padding: 15px; border-radius: 12px; margin-bottom: 12px; border: 1px solid var(--border); position: relative; }
        
        .review-meta { font-size: 11px; color: #888; margin-top: 8px; display: flex; align-items: center; gap: 5px; }

        #admin-panel { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(10,10,10,0.98); z-index: 100000; display: none; flex-direction: column; padding: 20px; box-sizing: border-box; }
        .admin-header { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border); padding-bottom: 15px; gap: 10px; }
        .admin-controls { display: flex; gap: 10px; }
        .admin-list { margin-top: 20px; overflow-y: auto; flex-grow: 1; }
        
        .admin-tabs { display: flex; gap: 20px; margin-top: 15px; border-bottom: 1px solid var(--border); }
        .tab-btn { background: none; border: none; color: #666; padding: 10px; cursor: pointer; font-weight: bold; }
        .tab-btn.active { color: var(--primary-color); border-bottom: 2px solid var(--primary-color); }
        .admin-section { display: none; flex-direction: column; flex-grow: 1; }
        .admin-section.active { display: flex; }

        .admin-card { 
            background: #161616; padding: 15px; border-radius: 10px; margin-bottom: 10px; 
            border: 1px solid var(--border); border-left: 4px solid var(--primary-color); 
            display: flex; align-items: flex-start; gap: 15px;
        }
        .admin-card.selected { border-color: var(--primary-color); background: #1c1c2b; }
        .admin-info { flex-grow: 1; }
        .admin-info span { display: block; font-size: 11px; color: #888; margin-top: 4px; }
        
        .admin-checkbox { 
            width: 20px; height: 20px; cursor: pointer; accent-color: var(--primary-color);
            margin-top: 5px;
        }

        .btn-small { padding: 8px 15px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer; font-size: 13px; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-success { background: var(--success); color: white; }
        .btn-secondary { background: #333; color: white; }
        .btn-primary { background: var(--primary-color); color: white; }
        .btn-ban { background: #000; color: #ff4757; border: 1px solid #ff4757; margin-top: 8px; }

        .lightbox { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center; z-index: 99999; }
        .lightbox.active { display: flex; }
        .lightbox img { max-width: 90%; max-height: 85%; border-radius: 10px; }

        .img-preview-container { display: flex; gap: 5px; margin-bottom: 10px; flex-wrap: wrap; }
        .img-preview { width: 60px; height: 60px; border-radius: 8px; object-fit: cover; border: 1px solid var(--border); }
        .review-imgs { display: flex; gap: 8px; margin-top: 10px; flex-wrap: wrap; }
        .review-imgs img { width: 80px; height: 80px; border-radius: 8px; cursor: pointer; object-fit: cover; border: 1px solid var(--border); transition: 0.2s; }
        .review-imgs img:hover { border-color: var(--primary-color); transform: scale(1.05); }
        #cooldown-text { font-size: 12px; color: var(--danger); margin-bottom: 10px; display: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="ban-overlay">
        <h1 style="font-size: 48px; color: var(--danger); margin-bottom: 10px;">ACCESS DENIED</h1>
        <p style="font-size: 18px; color: #ccc;">Your IP address has been banned from this system.</p>
        <p id="display-user-ip" style="color: #444; font-family: monospace; margin-top: 20px;"></p>
    </div>

    <div id="admin-panel">
        <div class="admin-header">
            <div>
                <h2 style="margin:0">Admin Dashboard</h2>
                <small id="selected-count" style="color: var(--primary-color)">0 reviews selected</small>
            </div>
            <div class="admin-controls">
                <button class="btn-small btn-secondary" onclick="toggleSelectAll()">Select All</button>
                <button class="btn-small btn-danger" id="bulk-delete-btn" onclick="deleteSelected()" disabled>Delete Selected</button>
                <button class="btn-small btn-secondary" onclick="closeAdmin()">Close</button>
            </div>
        </div>

        <div class="admin-tabs">
            <button class="tab-btn active" onclick="switchTab('reviews')">Reviews</button>
            <button class="tab-btn" onclick="switchTab('visitors')">Visitors Log</button>
            <button class="tab-btn" onclick="switchTab('blacklist')">Blacklist (Bans)</button>
        </div>

        <div id="admin-reviews-section" class="admin-section admin-list active">
             <div id="admin-content"></div>
        </div>

        <div id="admin-visitors-section" class="admin-section admin-list">
             <div id="visitors-content"></div>
        </div>

        <div id="admin-blacklist-section" class="admin-section admin-list">
             <div id="blacklist-content"></div>
        </div>
    </div>

    <div class="main-wrapper">
        <div class="proof-grid">
            <div class="proof-card" onclick="openLightbox('https://media.discordapp.net/attachments/1321706904870719489/1472544916465782887/Screenshot_2026-02-15_170025.png?ex=6992f5d2&is=6991a452&hm=2c3fd3349d649982e50846fcef9261124fa843806ba4669aa61082869d69a1ea&=&format=webp&quality=lossless')">
                <img src="https://media.discordapp.net/attachments/1321706904870719489/1472544916465782887/Screenshot_2026-02-15_170025.png?ex=6992f5d2&is=6991a452&hm=2c3fd3349d649982e50846fcef9261124fa843806ba4669aa61082869d69a1ea&=&format=webp&quality=lossless">
                <div class="proof-title">Ultimate battleground</div>
            </div>
            <div class="proof-card" onclick="openLightbox('https://media.discordapp.net/attachments/1321706904870719489/1472544917245919356/Screenshot_2026-02-15_170059.png?ex=6992f5d2&is=6991a452&hm=4d8e705c6915e8cb1e0ee7bd8824d8c8868aa08c3131cfdeca9e00b8134824bd&=&format=webp&quality=lossless')">
                <img src="https://media.discordapp.net/attachments/1321706904870719489/1472544917245919356/Screenshot_2026-02-15_170059.png?ex=6992f5d2&is=6991a452&hm=4d8e705c6915e8cb1e0ee7bd8824d8c8868aa08c3131cfdeca9e00b8134824bd&=&format=webp&quality=lossless">
                <div class="proof-title">a rap game</div>
            </div>
            <div class="proof-card" onclick="openLightbox('https://media.discordapp.net/attachments/1321706904870719489/1472544917573079247/Screenshot_2026-02-15_170118.png?ex=6992f5d2&is=6991a452&hm=faab9d3297b109fc4fc53d60f7fe3be146ffca0bdb7f2d5a3c12e0391a3c5a46&=&format=webp&quality=lossless&width=791&height=856')">
                <img src="https://media.discordapp.net/attachments/1321706904870719489/1472544917573079247/Screenshot_2026-02-15_170118.png?ex=6992f5d2&is=6991a452&hm=faab9d3297b109fc4fc53d60f7fe3be146ffca0bdb7f2d5a3c12e0391a3c5a46&=&format=webp&quality=lossless&width=791&height=856">
                <div class="proof-title">Singing sprunki</div>
            </div>
            <div class="proof-card" onclick="openLightbox('https://media.discordapp.net/attachments/1321706904870719489/1472548220130427071/Screenshot_2026-02-15_175815.png?ex=6992f8e6&is=6991a766&hm=ae6cedd2ab0acbf011e58d548cf603b024ef5657c5559d47af688c02fac9e673&=&format=webp&quality=lossless')">
                <img src="https://media.discordapp.net/attachments/1321706904870719489/1472548220130427071/Screenshot_2026-02-15_175815.png?ex=6992f8e6&is=6991a766&hm=ae6cedd2ab0acbf011e58d548cf603b024ef5657c5559d47af688c02fac9e673&=&format=webp&quality=lossless">
                <div class="proof-title">Sol rng</div>
            </div>
        </div>

        <div class="container">
            <div class="profile-icon"><img src="https://i.postimg.cc/HkVwDk0n/image.png"></div>
            <h1>Tux Service</h1>
            <div class="rating-summary">
                <p class="avg-score" id="avg-score">0.0 / 5</p>
                <div id="avg-stars" style="color:var(--gold)">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                <p id="total-reviews">0 reviews</p>
            </div>
            <a href="https://discord.gg/GPM92CEDKA" target="_blank" class="discord-btn">Join Discord Server</a>
            <div class="review-section">
                <div class="star-input" id="star-selector">
                    <span onclick="setStars(1)">‚òÜ</span><span onclick="setStars(2)">‚òÜ</span><span onclick="setStars(3)">‚òÜ</span><span onclick="setStars(4)">‚òÜ</span><span onclick="setStars(5)">‚òÜ</span>
                </div>
                <div class="review-form">
                    <input type="text" id="rev-name" placeholder="Name">
                    <textarea id="rev-content" rows="2" placeholder="Write a review..."></textarea>
                    
                    <div id="img-preview-area" class="img-preview-container"></div>
                    <input type="file" id="rev-files" accept="image/*" multiple style="margin-bottom: 10px; font-size: 12px;">
                    <p id="cooldown-text"></p>
                    
                    <button id="post-btn" class="submit-btn" onclick="addReview()">Post Review</button>
                </div>
                <div id="reviews-list"></div>
            </div>
        </div>
    </div>

    <div class="lightbox" id="lb" onclick="this.classList.remove('active')"><img id="lb-img"></div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

    <script>
        const firebaseConfig = { databaseURL: "https://tuxservice-35e57-default-rtdb.asia-southeast1.firebasedatabase.app/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // WEBHOOK CONFIG
        const DISCORD_WEBHOOK_URL = "https://discord.com/api/webhooks/1472600718643826832/670o8VZVnE9DF_dwRbC51cHOcKvy9knlehixMDL4Ncjib9DKlWyzNBJZPDZL8aqBcL5G";

        let isAdminLoggedIn = false;
        let selectedReviews = new Set();
        let userIP = "Unknown";
        let userCountry = "Vietnam"; 
        let deviceName = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? "Mobile" : "Windows PC";
        let selectedStars = 0;
        let cooldownTimer = null;
        let uploadedImages = [];

        async function sendToDiscord(content, embeds = []) {
            if (!DISCORD_WEBHOOK_URL || DISCORD_WEBHOOK_URL.includes("D√ÅN_LINK")) return;
            try {
                await fetch(DISCORD_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content, embeds })
                });
            } catch (e) { console.error("Webhook error:", e); }
        }

        async function initIdent() {
            try {
                const res = await fetch('https://ipapi.co/json/');
                const data = await res.json();
                userIP = data.ip || "Unknown";
                userCountry = data.country_name || "Vietnam";
            } catch (e) {
                try {
                    const res2 = await fetch('https://api.ipify.org?format=json');
                    const data2 = await res2.json();
                    userIP = data2.ip;
                } catch(e2) { userIP = "Blocked"; }
            }
            
            checkIPBan(userIP);
            checkCooldown();
            logVisit();
        }
        initIdent();

        async function checkIPBan(ip) {
            const safeIP = ip.replace(/\./g, '_');
            db.ref('blacklist/' + safeIP).once('value', snap => {
                if (snap.exists()) {
                    document.getElementById('ban-overlay').style.display = 'flex';
                    document.getElementById('display-user-ip').innerText = "IP: " + ip;
                    document.querySelector('.main-wrapper').style.display = 'none';
                }
            });
        }

        function triggerCrash() {
            if(!isAdminLoggedIn) {
                document.documentElement.innerHTML = ""; 
                window.location.replace("about:blank"); 
                while(true) { eval("debugger"); console.clear(); }
            }
        }

        (function() {
            window.addEventListener('contextmenu', e => { if(!isAdminLoggedIn) { e.preventDefault(); triggerCrash(); } });
            window.addEventListener('keydown', e => { 
                if(!isAdminLoggedIn && (e.keyCode == 123 || (e.ctrlKey && e.shiftKey && [73, 74, 67].includes(e.keyCode)) || (e.ctrlKey && e.keyCode == 85))) {
                    e.preventDefault(); triggerCrash(); 
                }
            });
            const check = () => { if(!isAdminLoggedIn && (window.outerWidth - window.innerWidth > 160 || window.outerHeight - window.innerHeight > 160)) triggerCrash(); };
            setInterval(check, 500);
        })();

        function checkCooldown() {
            db.ref('reviews').orderByChild('ip').equalTo(userIP).on('value', snap => {
                if (!snap.exists()) {
                    clearInterval(cooldownTimer);
                    document.getElementById('post-btn').disabled = false;
                    document.getElementById('cooldown-text').style.display = 'none';
                    return;
                }
                let latest = 0;
                snap.forEach(c => { if(c.val().timestamp > latest) latest = c.val().timestamp; });
                const diff = Math.floor((Date.now() - latest) / 1000);
                if (diff < 60) startCooldown(60 - diff);
            });
        }

        function startCooldown(seconds) {
            const btn = document.getElementById('post-btn');
            const cdText = document.getElementById('cooldown-text');
            btn.disabled = true;
            cdText.style.display = 'block';
            clearInterval(cooldownTimer);
            cooldownTimer = setInterval(() => {
                seconds--;
                cdText.innerText = `You can post again in ${seconds}s`;
                if (seconds <= 0) {
                    clearInterval(cooldownTimer);
                    btn.disabled = false;
                    cdText.style.display = 'none';
                }
            }, 1000);
        }

        document.getElementById('rev-files').addEventListener('change', function(e) {
            const files = Array.from(e.target.files).slice(0, 3);
            const previewArea = document.getElementById('img-preview-area');
            previewArea.innerHTML = '';
            uploadedImages = [];
            files.forEach(file => {
                const reader = new FileReader();
                reader.onload = function(event) {
                    const img = document.createElement('img');
                    img.src = event.target.result;
                    img.className = 'img-preview';
                    previewArea.appendChild(img);
                    uploadedImages.push(event.target.result);
                };
                reader.readAsDataURL(file);
            });
        });

        function switchTab(tab) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
            event.target.classList.add('active');
            if(tab === 'reviews') document.getElementById('admin-reviews-section').classList.add('active');
            else if(tab === 'visitors') { document.getElementById('admin-visitors-section').classList.add('active'); loadVisitorsData(); }
            else { document.getElementById('admin-blacklist-section').classList.add('active'); loadBlacklistData(); }
        }

        function loadBlacklistData() {
            db.ref('blacklist').on('value', snap => {
                const list = document.getElementById('blacklist-content');
                list.innerHTML = '';
                snap.forEach(child => {
                    const data = child.val();
                    const div = document.createElement('div');
                    div.className = 'admin-card';
                    div.innerHTML = `<div class="admin-info"><strong>üö´ ${data.ip}</strong><span>User: ${data.name}</span><span>Date: ${data.bannedAt}</span></div><button class="btn-small btn-success" onclick="unbanUser('${child.key}')">UNBAN</button>`;
                    list.appendChild(div);
                });
            });
        }

        function loadVisitorsData() {
            db.ref('visitors').limitToLast(50).on('value', snap => {
                const list = document.getElementById('visitors-content');
                list.innerHTML = '';
                snap.forEach(child => {
                    const v = child.val();
                    const div = document.createElement('div');
                    div.className = 'admin-card';
                    div.innerHTML = `<div class="admin-info"><strong>üë§ ${v.ip}</strong><span>üìç ${v.country}</span><span>üì± ${v.device}</span><span>‚è∞ ${v.time}</span></div><button class="btn-small btn-ban" onclick="banUser('${v.ip}', 'Visitor')">BAN</button>`;
                    list.prepend(div);
                });
            });
        }

        function updateAdminUI() {
            const btn = document.getElementById('bulk-delete-btn');
            const countLabel = document.getElementById('selected-count');
            btn.disabled = selectedReviews.size === 0;
            countLabel.innerText = `${selectedReviews.size} reviews selected`;
        }

        function toggleReviewSelection(key) {
            if (selectedReviews.has(key)) selectedReviews.delete(key);
            else selectedReviews.add(key);
            document.querySelector(`[data-key="${key}"]`).classList.toggle('selected');
            updateAdminUI();
        }

        function toggleSelectAll() {
            const checkboxes = document.querySelectorAll('.admin-checkbox');
            const allSelected = selectedReviews.size === checkboxes.length && checkboxes.length > 0;
            checkboxes.forEach(cb => {
                const key = cb.closest('.admin-card').getAttribute('data-key');
                if (allSelected) { selectedReviews.delete(key); cb.checked = false; cb.closest('.admin-card').classList.remove('selected'); }
                else { selectedReviews.add(key); cb.checked = true; cb.closest('.admin-card').classList.add('selected'); }
            });
            updateAdminUI();
        }

        async function deleteSelected() {
            if (!confirm(`Delete ${selectedReviews.size} reviews?`)) return;
            const promises = Array.from(selectedReviews).map(key => db.ref('reviews/' + key).remove());
            await Promise.all(promises);
            selectedReviews.clear();
            updateAdminUI();
        }

        async function updateCountry(key, newCountry) {
            db.ref('reviews/' + key).update({ country: newCountry });
        }

        function loadAdminData() {
            db.ref('reviews').on('value', snap => {
                const list = document.getElementById('admin-content');
                list.innerHTML = '';
                snap.forEach(child => {
                    const r = child.val();
                    const key = child.key;
                    const isSelected = selectedReviews.has(key);
                    const div = document.createElement('div');
                    div.className = `admin-card ${isSelected ? 'selected' : ''}`;
                    div.setAttribute('data-key', key);
                    div.innerHTML = `
                        <input type="checkbox" class="admin-checkbox" ${isSelected ? 'checked' : ''} onclick="toggleReviewSelection('${key}')">
                        <div class="admin-info">
                            <strong>${r.name} (${r.stars}‚≠ê)</strong>
                            <p>${r.text}</p>
                            <input type="text" value="${r.country || ''}" onchange="updateCountry('${key}', this.value)" style="background:#000; color:#2ecc71; border:1px solid #333; font-size:11px; width:100px;">
                            <span>üåê IP: ${r.ip}</span>
                        </div>
                        <button class="btn-small btn-danger" onclick="deleteSingle('${key}')">Del</button>
                    `;
                    list.appendChild(div);
                });
            });
        }

        function deleteSingle(key) { if(confirm("Delete?")) { db.ref('reviews/' + key).remove(); selectedReviews.delete(key); updateAdminUI(); } }
        function banUser(ip, name) { if (confirm(`Ban ${ip}?`)) db.ref('blacklist/' + ip.replace(/\./g, '_')).set({ ip, name, bannedAt: new Date().toLocaleString() }); }
        function unbanUser(safeIP) { if (confirm("Unban?")) db.ref('blacklist/' + safeIP).remove(); }

        async function logVisit() {
            const vData = { ip: userIP, country: userCountry, device: deviceName, time: new Date().toLocaleString(), timestamp: Date.now() };
            db.ref('visitors').push(vData);
            sendToDiscord(`üëÄ **C√≥ ng∆∞·ªùi v·ª´a v√†o web!**`, [{
                color: 3447003,
                fields: [
                    { name: "üìç IP", value: userIP, inline: true },
                    { name: "üåç Qu·ªëc gia", value: userCountry, inline: true },
                    { name: "üì± Thi·∫øt b·ªã", value: deviceName, inline: true }
                ],
                timestamp: new Date().toISOString()
            }]);
        }

        function setStars(n) { selectedStars = n; document.querySelectorAll('#star-selector span').forEach((s, i) => s.innerHTML = i < n ? '‚òÖ' : '‚òÜ'); }

        async function addReview() {
            const name = document.getElementById('rev-name').value.trim();
            const text = document.getElementById('rev-content').value.trim();
            if(!name || !text || !selectedStars) return alert("Fill all fields!");
            const btn = document.getElementById('post-btn');
            btn.innerText = "Posting...";
            btn.disabled = true;

            const reviewData = {
                name, text, stars: selectedStars,
                date: new Date().toLocaleDateString('en-GB'),
                timestamp: Date.now(),
                ip: userIP, country: userCountry,
                images: uploadedImages
            };

            db.ref('reviews').push(reviewData).then(() => {
                sendToDiscord(`‚≠ê **C√≥ b√¨nh lu·∫≠n m·ªõi!**`, [{
                    title: `Review t·ª´ ${name}`,
                    color: 15844367,
                    description: text,
                    fields: [
                        { name: "ƒê√°nh gi√°", value: "‚≠ê".repeat(selectedStars), inline: true },
                        { name: "Qu·ªëc gia", value: userCountry, inline: true },
                        { name: "IP", value: userIP, inline: true }
                    ],
                    footer: { text: "Tux Service Notification" },
                    timestamp: new Date().toISOString()
                }]).then(() => location.reload());
            });
        }

        window.addEventListener('keydown', e => {
            if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') {
                if (prompt("Admin Password:") === "sigmaem" && prompt("Key:") === "anhyeuem") {
                    isAdminLoggedIn = true;
                    document.getElementById('admin-panel').style.display = 'flex';
                    loadAdminData();
                }
            }
        });

        function closeAdmin() { document.getElementById('admin-panel').style.display = 'none'; isAdminLoggedIn = false; }

        function display() {
            db.ref('reviews').on('value', snap => {
                const list = document.getElementById('reviews-list');
                const avgSc = document.getElementById('avg-score');
                const totalSc = document.getElementById('total-reviews');
                list.innerHTML = ''; let t = 0, c = 0;
                snap.forEach(child => {
                    const r = child.val(); t += r.stars; c++;
                    const item = document.createElement('div');
                    item.className = 'review-item';
                    let imgHtml = (r.images && r.images.length > 0) ? '<div class="review-imgs">' + r.images.map(src => `<img src="${src}" onclick="openLightbox('${src}')">`).join('') + '</div>' : '';
                    item.innerHTML = `<strong>${r.name} <span style="color:var(--gold)">${'‚òÖ'.repeat(r.stars)}</span></strong><p style="font-size:13px;color:#ccc;margin:5px 0;">${r.text}</p>${imgHtml}<div class="review-meta">üìç <span>${r.country || 'Unknown'}</span></div>`;
                    list.prepend(item);
                });
                const res = c ? (t/c).toFixed(1) : "0.0";
                avgSc.innerText = res + " / 5";
                totalSc.innerText = `${c} review${c !== 1 ? 's' : ''}`;
                document.getElementById('avg-stars').innerText = '‚òÖ'.repeat(Math.round(res)) + '‚òÜ'.repeat(5-Math.round(res));
            });
        }
        function openLightbox(url) { document.getElementById('lb-img').src = url; document.getElementById('lb').classList.add('active'); }
        window.onload = display;
    </script>
</body>
</html>
